<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mmrobot-server: dataviewer.m Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>dataviewer.m</h1><a href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2gdatalogger__ipc__retrievevariable_8m.html#ac132315a15f73d90d100c0d10aaa8c88">function</a> <a class="code" href="demo__pthread_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>
<a name="l00002"></a>00002 
<a name="l00003"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#aa352f5f080329b3d0104b863660b6340">00003</a> close <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2compile__gdatalogger__ipc__retrievevariable_8m.html#a00a349297fa58bc80ff5329e25dcfe28">all</a>;
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a31529343f1711a66324cc584d5a8dfd0">disp</a>(<span class="stringliteral">&apos;Iniciando dataviewer...&apos;</span>);
<a name="l00006"></a>00006 
<a name="l00007"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a469994e78f66a44815c015b7f4b8b2f8">00007</a> <a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a469994e78f66a44815c015b7f4b8b2f8">t1</a> = [];
<a name="l00008"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a24aeadb733f27244ec14e4cba82eeee9">00008</a> <a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a24aeadb733f27244ec14e4cba82eeee9">t2</a> = [];
<a name="l00009"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a7f911dc1dbbc41c6cae56357e8fb2230">00009</a> <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a7f911dc1dbbc41c6cae56357e8fb2230">y1</a> = [];
<a name="l00010"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a41b94b12b7cb45b3ddee299d4e7b79e8">00010</a> <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a41b94b12b7cb45b3ddee299d4e7b79e8">y2</a> = [];
<a name="l00011"></a>00011 
<a name="l00012"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a54d39bd750bf38e91a420568a00e3600">00012</a> <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a54d39bd750bf38e91a420568a00e3600">twindow</a> = 10;
<a name="l00013"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a015eb90e0de9f16e87bd149d4b9ce959">00013</a> <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> = 0;
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="keywordflow">while</span>(<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>~=4)
<a name="l00016"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#aad5b8c2946402d5850f00b758f2f70dd">00016</a>     [data,dataunitstring,status] = gdatalogger_ipc_retrievevariable(<span class="stringliteral">&apos;y1&apos;</span>);
<a name="l00017"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a180987ace067c847f54e562707bd4c0c">00017</a>     [y1] = [y1; data]; <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a180987ace067c847f54e562707bd4c0c">y1_unitstring</a> = <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#aad5b8c2946402d5850f00b758f2f70dd">dataunitstring</a>;
<a name="l00018"></a>00018     [data,dataunitstring,status] = gdatalogger_ipc_retrievevariable(<span class="stringliteral">&apos;t1&apos;</span>);
<a name="l00019"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#aa526bd312720c8d8a3e277b46df09051">00019</a>     [t1]  = [t1 ; data]; <a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#aa526bd312720c8d8a3e277b46df09051">t1_unitstring</a>  = <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#aad5b8c2946402d5850f00b758f2f70dd">dataunitstring</a>;
<a name="l00020"></a>00020     [data,dataunitstring,status] = gdatalogger_ipc_retrievevariable(<span class="stringliteral">&apos;y2&apos;</span>);
<a name="l00021"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a2f7918daeedac869b9178f6f4d698939">00021</a>     [y2] = [y2; data]; <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a2f7918daeedac869b9178f6f4d698939">y2_unitstring</a> = <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#aad5b8c2946402d5850f00b758f2f70dd">dataunitstring</a>;
<a name="l00022"></a>00022     [data,dataunitstring,status] = gdatalogger_ipc_retrievevariable(<span class="stringliteral">&apos;t2&apos;</span>);
<a name="l00023"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a1e7e776b7d891100ccf4dd385547f42d">00023</a>     [t2]  = [t2 ; data]; <a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a1e7e776b7d891100ccf4dd385547f42d">t2_unitstring</a>  = <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#aad5b8c2946402d5850f00b758f2f70dd">dataunitstring</a>;
<a name="l00024"></a>00024     
<a name="l00025"></a>00025     <span class="keywordflow">if</span>(<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>~=4)
<a name="l00026"></a>00026         <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlabdatafiles_2demo_8m.html#a391e34f2de441d79152a7b3d6e4c9c86">figure</a>(1);
<a name="l00027"></a>00027         <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a48dc8634024e4b228c94c6accabfa69e">subplot</a>(211); <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a0107b1e2bf358a3d284e5112bcf7dc61">myplot</a>(<a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a469994e78f66a44815c015b7f4b8b2f8">t1</a>,<a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#aa526bd312720c8d8a3e277b46df09051">t1_unitstring</a>,<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a7f911dc1dbbc41c6cae56357e8fb2230">y1</a>,<span class="stringliteral">&apos;y1&apos;</span>,<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a180987ace067c847f54e562707bd4c0c">y1_unitstring</a>,<span class="charliteral">&apos;b&apos;</span>,<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a54d39bd750bf38e91a420568a00e3600">twindow</a>);
<a name="l00028"></a>00028         <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a48dc8634024e4b228c94c6accabfa69e">subplot</a>(212); <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a0107b1e2bf358a3d284e5112bcf7dc61">myplot</a>(<a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a24aeadb733f27244ec14e4cba82eeee9">t2</a>,<a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a1e7e776b7d891100ccf4dd385547f42d">t2_unitstring</a>,<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a41b94b12b7cb45b3ddee299d4e7b79e8">y2</a>,<span class="stringliteral">&apos;y2&apos;</span>,<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a2f7918daeedac869b9178f6f4d698939">y2_unitstring</a>,<span class="charliteral">&apos;b&apos;</span>,<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a54d39bd750bf38e91a420568a00e3600">twindow</a>);
<a name="l00029"></a>00029         
<a name="l00030"></a>00030         <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlabdatafiles_2demo_8m.html#a391e34f2de441d79152a7b3d6e4c9c86">figure</a>(2); 
<a name="l00031"></a>00031         <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a48dc8634024e4b228c94c6accabfa69e">subplot</a>(211); <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#acae97efcd3e6a0965a7d4df9f6553ffc">plot</a>(<a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a469994e78f66a44815c015b7f4b8b2f8">t1</a>,[0;diff(<a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a469994e78f66a44815c015b7f4b8b2f8">t1</a>)]); <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a27fd587d7c7c255c818968096d590d76">title</a>(<span class="stringliteral">&apos;Per√≠odo de amostragem da tarefa 1&apos;</span>);        
<a name="l00032"></a>00032         <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a48dc8634024e4b228c94c6accabfa69e">subplot</a>(212); <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#acae97efcd3e6a0965a7d4df9f6553ffc">plot</a>(<a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a24aeadb733f27244ec14e4cba82eeee9">t2</a>,[0;diff(<a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a24aeadb733f27244ec14e4cba82eeee9">t2</a>)]); <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a27fd587d7c7c255c818968096d590d76">title</a>(<span class="stringliteral">&apos;Per√≠odo de amostragem da tarefa 2&apos;</span>);        
<a name="l00033"></a>00033         
<a name="l00034"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#aadd84b46ee6d2e3ae04d2920f4e78bfd">00034</a>         <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#aadd84b46ee6d2e3ae04d2920f4e78bfd">drawnow</a>;
<a name="l00035"></a>00035         <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#af5e7b6b3888b7ff1427978d360412fe7">pause</a>(0.1);
<a name="l00036"></a>00036     end
<a name="l00037"></a>00037 end
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a31529343f1711a66324cc584d5a8dfd0">disp</a>(<span class="stringliteral">&apos;Saindo...&apos;</span>);
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a9717e7bbecb906637e86cef6da3d83c2">00041</a> <span class="keywordflow">return</span>;
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2gdatalogger__ipc__retrievevariable_8m.html#ac132315a15f73d90d100c0d10aaa8c88">function</a> <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a0107b1e2bf358a3d284e5112bcf7dc61">myplot</a>(<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#aaccc9105df5383111407fd5b41255e23">t</a>,tunit,<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlabdatafiles_2ReadGMatlabDataFile_8m.html#a4fdd13e26a831c0dff92f623df42f347">var</a>,varname,varunit,color,<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a54d39bd750bf38e91a420568a00e3600">twindow</a>)
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 kmax = min([length(<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#aaccc9105df5383111407fd5b41255e23">t</a>),length(<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlabdatafiles_2ReadGMatlabDataFile_8m.html#a4fdd13e26a831c0dff92f623df42f347">var</a>)]);
<a name="l00046"></a>00046 <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a871a1aadebb67260723cef652e37592c">if</a>(t(kmax)&gt;<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a54d39bd750bf38e91a420568a00e3600">twindow</a>)
<a name="l00047"></a>00047     <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a6ed4ca490546bf931c9ba98200b3cf5d">taxismin</a> = t(kmax) - <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a54d39bd750bf38e91a420568a00e3600">twindow</a>;
<a name="l00048"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a40f83f3ae20b99cae42f7736245dd6b6">00048</a>     <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a40f83f3ae20b99cae42f7736245dd6b6">taxismax</a> = t(kmax);
<a name="l00049"></a>00049 else
<a name="l00050"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a6ed4ca490546bf931c9ba98200b3cf5d">00050</a>     <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a6ed4ca490546bf931c9ba98200b3cf5d">taxismin</a> = 0;
<a name="l00051"></a>00051     <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a40f83f3ae20b99cae42f7736245dd6b6">taxismax</a> = twindow;
<a name="l00052"></a>00052 end
<a name="l00053"></a>00053 <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#acae97efcd3e6a0965a7d4df9f6553ffc">plot</a>(t(1:kmax),var(1:kmax),color); 
<a name="l00054"></a><a class="code" href="libs_2gdatalogger_2demo-xenomai_2matlab_2dataviewer_8m.html#a8fa675eb2fcec5b95d9d21c670da7f30">00054</a> <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a8fa675eb2fcec5b95d9d21c670da7f30">ax</a> = <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#ac13da9f3878ccb7b2501096c3df3d0c0">axis</a>; axis([<a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a6ed4ca490546bf931c9ba98200b3cf5d">taxismin</a> <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a40f83f3ae20b99cae42f7736245dd6b6">taxismax</a> <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a8fa675eb2fcec5b95d9d21c670da7f30">ax</a>(3) <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a8fa675eb2fcec5b95d9d21c670da7f30">ax</a>(4)]);
<a name="l00055"></a>00055 <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#abfdbf47a6617364a73fa3a61e455c7f3">xlabel</a>(sprintf(&apos;t [%s]&apos;,tunit)); 
<a name="l00056"></a>00056 <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a457b37eaffd124d92fd274a5f5005282">ylabel</a>(sprintf(&apos;%s [%s]&apos;,varname,varunit)); 
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <a class="code" href="libs_2gdatalogger_2demo-pthread_2matlab_2dataviewer_8m.html#a9717e7bbecb906637e86cef6da3d83c2">return</a>;
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Fri Jan 14 01:14:31 2011 for mmrobot-server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
